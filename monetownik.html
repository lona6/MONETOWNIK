
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Monetownik </title>
<style>
  body {
    background: #1a1a1a;
    color: #eee;
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  select, input, button {
    padding: 6px;
    margin: 5px 0;
    border-radius: 4px;
    border: none;
    font-size: 1rem;
  }
  button {
    background: #333;
    color: #eee;
    cursor: pointer;
  }
  button:hover {
    background: #555;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 15px;
  }
  th, td {
    border: 1px solid #444;
    padding: 8px;
    text-align: center;
  }
  th {
    background: #222;
  }
  #loggedInUser {
    font-weight: bold;
    margin-bottom: 10px;
  }
  label {
    display: block;
  }
</style>
</head>
<body>

<h1>Monetownik STZ</h1>

<div>
  <label for="loginPlayer">Wybierz gracza:</label>
  <select id="loginPlayer"></select>

  <label for="passwordInput">HasÅ‚o:</label>
  <input type="password" id="passwordInput" placeholder="Wpisz hasÅ‚o" />

  <button onclick="login()">Zaloguj</button>
</div>

<div id="loggedInUser" style="display:none;">
  <p>Zalogowany: <span id="currentUserName"></span></p>
</div>

<hr />

<div id="actions" style="display:none;">
  <label>WyÅ›lij monety do:</label><br />
  <select id="toPlayer"></select><br />

  <label for="amount">IloÅ›Ä‡ Monet do przesÅ‚ania:</label><br />
  <input type="number" id="amount" min="1" value="1" /><br />

  <button onclick="transferCoins()">PrzeÅ›lij Monety</button>

  <hr />

  <label>Konwertuj Monety na Levele (10 Monet = 1 Level):</label><br />
  <input type="number" id="convertAmount" min="1" value="10" /><br />
  <button onclick="convertCoinsToLevels()">Konwertuj</button>
</div>

<div id="adminPanel" style="display:none;">
  <hr />
  <h3>ðŸ”§ Panel Admina (dla .)</h3>

  <label for="adminTarget">Wybierz gracza:</label>
  <select id="adminTarget"></select><br />

  <label for="adminAmount">Dodaj Monety:</label>
  <input type="number" id="adminAmount" min="1" /><br />
  <button onclick="adminAddCoins()">Dodaj Monety</button>
</div>

<hr />

<h2>Stan konta:</h2>
<table>
  <thead>
    <tr><th>ImiÄ™</th><th>Monety ðŸª™</th><th>Level ðŸ§ª</th></tr>
  </thead>
  <tbody id="playersTableBody"></tbody>
</table>

<script>
  const players = [
    { name: "Igor", coins: 10, level: 1, password: "0099" },
    { name: "Hubert", coins: 10, level: 1, password: "Hvb3r7" },
    { name: "MichaÅ‚", coins: 10, level: 1, password: "monetymichalka" },
    { name: "Bruno", coins: 10, level: 1, password: "12D42385" },
    { name: "Gucio", coins: 10, level: 1, password: "icespicegyat" },
    { name: "Dominik", coins: 10, level: 1, password: "Piesel88" },
    { name: "Kacper", coins: 10, level: 1, password: "kapipolo132" },
    { name: "Tomek", coins: 10, level: 1, password: "tomek123" },
    { name: "KiryÅ‚", coins: 10, level: 1, password: "kiryl123" },
    { name: ".", coins: 10000, level: 1, password: "0099" }
  ];

  let loggedInIndex = null;

  function populateLogin() {
    const loginSelect = document.getElementById('loginPlayer');
    loginSelect.innerHTML = '';
    players.forEach((p, i) => {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = p.name;
      loginSelect.appendChild(option);
    });
  }

  function populateToPlayers() {
    const to = document.getElementById('toPlayer');
    to.innerHTML = '';
    players.forEach((p, i) => {
      if (i !== loggedInIndex) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = p.name;
        to.appendChild(option);
      }
    });
  }

  function setupAdminPanel() {
    if (players[loggedInIndex].name === ".") {
      document.getElementById("adminPanel").style.display = "block";
      const select = document.getElementById("adminTarget");
      select.innerHTML = '';
      players.forEach((p, i) => {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = p.name;
        select.appendChild(option);
      });
    } else {
      document.getElementById("adminPanel").style.display = "none";
    }
  }

  function login() {
    const loginSelect = document.getElementById('loginPlayer');
    const passwordInput = document.getElementById('passwordInput');
    const index = parseInt(loginSelect.value);
    const pass = passwordInput.value;

    if (pass === players[index].password) {
      loggedInIndex = index;
      document.getElementById('currentUserName').textContent = players[loggedInIndex].name;
      document.getElementById('loggedInUser').style.display = 'block';
      document.getElementById('actions').style.display = 'block';
      populateToPlayers();
      render();
      setupAdminPanel();
    } else {
      alert("Chujowe hasÅ‚o, sprÃ³buj jeszcze raz!");
      passwordInput.value = "";
    }
  }

  function render() {
    const tbody = document.getElementById('playersTableBody');
    tbody.innerHTML = '';
    players.forEach(p => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.name}</td>
        <td>${p.coins} ðŸª™</td>
        <td>${p.level} ðŸ§ª</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function transferCoins() {
    if (loggedInIndex === null) {
      alert("Zaloguj siÄ™ najpierw!");
      return;
    }
    const toIndex = parseInt(document.getElementById('toPlayer').value);
    const amount = parseInt(document.getElementById('amount').value);

    if (amount <= 0 || isNaN(amount)) {
      alert("Podaj poprawnÄ… iloÅ›Ä‡ monet!");
      return;
    }
    if (players[loggedInIndex].coins < amount) {
      alert("Nie masz tyle monet!");
      return;
    }

    players[loggedInIndex].coins -= amount;
    players[toIndex].coins += amount;

    render();
  }

  function convertCoinsToLevels() {
    if (loggedInIndex === null) {
      alert("Zaloguj siÄ™ najpierw!");
      return;
    }
    let amount = parseInt(document.getElementById('convertAmount').value);

    if (amount <= 0 || isNaN(amount)) {
      alert("Podaj poprawnÄ… iloÅ›Ä‡ monet do konwersji!");
      return;
    }
    if (players[loggedInIndex].coins < amount) {
      alert("Nie masz tyle monet!");
      return;
    }

    const levelsGained = Math.floor(amount / 10);
    if (levelsGained === 0) {
      alert("Musisz konwertowaÄ‡ co najmniej 10 monet na 1 level!");
      return;
    }

    const coinsUsed = levelsGained * 10;

    players[loggedInIndex].coins -= coinsUsed;
    players[loggedInIndex].level += levelsGained;

    render();
  }

  function adminAddCoins() {
    const targetIndex = parseInt(document.getElementById("adminTarget").value);
    const amount = parseInt(document.getElementById("adminAmount").value);

    if (isNaN(amount) || amount <= 0) {
      alert("Podaj poprawnÄ… iloÅ›Ä‡ monet.");
      return;
    }

    players[targetIndex].coins += amount;
    alert(`Dodano ${amount} monet do konta ${players[targetIndex].name}.`);
    render();
  }

  populateLogin();
  render();
</script>

</body>
</html>
